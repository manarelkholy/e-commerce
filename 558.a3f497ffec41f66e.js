"use strict";(self.webpackChunkfeshcart=self.webpackChunkfeshcart||[]).push([[558],{4558:(h,c,o)=>{o.r(c),o.d(c,{PaymentComponent:()=>_});var m=o(6814),r=o(95),t=o(4769),l=o(1120),n=o(6286);let _=(()=>{class e{constructor(s,a){this._ActivatedRoute=s,this._CartService=a,this.cartId="",this.orderForm=new r.cw({details:new r.NI(""),phone:new r.NI(""),city:new r.NI("")}),this.cartDetails=null}handleForm(){console.log(this.orderForm.value),this._CartService.checkOut(this.cartId,this.orderForm.value).subscribe({next:s=>{console.log(s),"success"==s.status&&window.open(s.session.url,"_self")}})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:s=>{this.cartId=s.get("id"),console.log("cartId ",this.cartId)}})}clearCart(){this._CartService.clearCart().subscribe({next:s=>{console.log(s.message),"success"==s.message&&(this.cartDetails=null)}})}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(l.gz),t.Y36(n.N))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-payment"]],standalone:!0,features:[t.jDz],decls:19,vars:1,consts:[[1,"my-5","w-75","mx-auto","rounded","shadow","bg-main-light","p-5"],[3,"formGroup","ngSubmit"],[1,"form-item"],["for","details",1,"my-2"],["type","text","id","details","formControlName","details",1,"form-control"],["for","phone",1,"my-2"],["type","tel","id","phone","formControlName","phone",1,"form-control","mb-3"],["for","city",1,"my-2"],["type","text","id","city","formControlName","city",1,"form-control"],[1,"btn","btn-main","my-3","btn-sm",3,"click"]],template:function(a,u){1&a&&(t.TgZ(0,"section",0)(1,"h1"),t._uU(2,"CheckOut Session"),t.qZA(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return u.handleForm()}),t.TgZ(4,"div",2)(5,"div")(6,"label",3),t._uU(7,"Details: "),t.qZA(),t._UZ(8,"input",4),t.qZA(),t.TgZ(9,"div")(10,"label",5),t._uU(11,"Phone: "),t.qZA(),t._UZ(12,"input",6),t.qZA(),t.TgZ(13,"div")(14,"label",7),t._uU(15,"City: "),t.qZA(),t._UZ(16,"input",8),t.qZA(),t.TgZ(17,"button",9),t.NdJ("click",function(){return u.clearCart()}),t._uU(18,"Check Out"),t.qZA()()()()),2&a&&(t.xp6(3),t.Q6J("formGroup",u.orderForm))},dependencies:[m.ez,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return e})()},6286:(h,c,o)=>{o.d(c,{N:()=>l});var m=o(5619),r=o(4769),t=o(9862);let l=(()=>{class n{constructor(e){this._HttpClient=e,this.cartNum=new m.X(0),this.myToken={token:localStorage.getItem("etoken")||""}}addToCart(e){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:e},{headers:this.myToken})}getCartUser(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myToken})}removeCartItem(e){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${e}`,{headers:this.myToken})}updateCartCount(e,i){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${e}`,{count:i},{headers:this.myToken})}clearCart(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myToken})}checkOut(e,i){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${e}?url=http://localhost:3000`,{shippingAddress:i},{headers:this.myToken})}static#t=this.\u0275fac=function(i){return new(i||n)(r.LFG(t.eN))};static#e=this.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);