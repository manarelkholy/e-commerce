"use strict";(self.webpackChunkfeshcart=self.webpackChunkfeshcart||[]).push([[281],{281:(p,m,r)=>{r.r(m),r.d(m,{WishListComponent:()=>T});var _=r(6814),u=r(1120),t=r(4769),d=r(9196),a=r(2425),g=r(6286);function o(e,l){if(1&e){const s=t.EpF();t.TgZ(0,"i",16),t.NdJ("click",function(){t.CHM(s);const c=t.oxw().$implicit,h=t.oxw();return t.KtG(h.addFav(c._id))}),t.qZA()}}function n(e,l){if(1&e){const s=t.EpF();t.TgZ(0,"i",17),t.NdJ("click",function(){t.CHM(s);const c=t.oxw().$implicit,h=t.oxw();return t.KtG(h.removeFav(c._id))}),t.qZA()}}function v(e,l){if(1&e&&t._UZ(0,"i",18),2&e){const s=l.$implicit,i=t.oxw().$implicit;t.ekj("rating-color",i.ratingsAverage>=s)}}const f=function(e){return["/productdetails",e]},C=function(){return[1,2,3,4,5]};function x(e,l){if(1&e){const s=t.EpF();t.TgZ(0,"div",3)(1,"div",4),t.YNc(2,o,1,0,"i",5),t.YNc(3,n,1,0,"i",6),t.TgZ(4,"div",7),t._UZ(5,"img",8),t.TgZ(6,"h3",9),t._uU(7),t.qZA(),t.TgZ(8,"h4",10),t._uU(9),t.qZA(),t.TgZ(10,"div",11)(11,"span"),t._uU(12),t.qZA(),t.TgZ(13,"div",12),t.YNc(14,v,1,2,"i",13),t.TgZ(15,"span",14),t._uU(16),t.qZA()()()(),t.TgZ(17,"button",15),t.NdJ("click",function(){const h=t.CHM(s).$implicit,W=t.oxw();return t.KtG(W.addProductToCart(h._id))}),t._uU(18,"Add "),t.qZA()()()}if(2&e){const s=l.$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngIf",!i.wishListData.includes(s._id)),t.xp6(1),t.Q6J("ngIf",i.wishListData.includes(s._id)),t.xp6(1),t.Q6J("routerLink",t.VKq(10,f,s._id)),t.xp6(1),t.Q6J("src",s.imageCover,t.LSH)("alt",s.title),t.xp6(2),t.Oqu(s.category.name),t.xp6(2),t.Oqu(s.title.split(" ").slice(0,2).join(" ")),t.xp6(3),t.hij("",s.price," EGP"),t.xp6(2),t.Q6J("ngForOf",t.DdM(12,C)),t.xp6(2),t.Oqu(s.ratingsAverage)}}let T=(()=>{class e{constructor(s,i,c){this._WishlistService=s,this._ToastrService=i,this._CartService=c,this.products=[],this.wishListData=[]}ngOnInit(){this._WishlistService.getWishList().subscribe({next:s=>{this.products=s.data;const i=this.products.map(c=>c._id);console.log("newData",i),this.wishListData=i,this._WishlistService.WishlistNum.next(s.count)}})}addProductToCart(s){this._CartService.addToCart(s).subscribe({next:i=>{console.log(i),this._ToastrService.success(i.message,"",{positionClass:"toast-bottom-right",progressBar:!0,timeOut:2500}),this._CartService.cartNum.next(i.numOfCartItems)},error:i=>{console.log(i)}})}addFav(s){this._WishlistService.addToWishList(s).subscribe({next:i=>{console.log(i.message),this._ToastrService.success(i.message),this.wishListData=i.data,this._WishlistService.WishlistNum.next(i.count)},error:i=>{console.log(i)}})}removeFav(s){this._WishlistService.removeProductFromWishlist(s).subscribe({next:i=>{console.log(i.message),this._ToastrService.success(i.message),this.wishListData=i.data,this._WishlistService.getWishList().subscribe({next:c=>{this.products=c.data,this._WishlistService.WishlistNum.next(c.count)}})},error:i=>{console.log(i)}})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(d.M),t.Y36(a._W),t.Y36(g.N))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-wish-list"]],standalone:!0,features:[t.jDz],decls:3,vars:1,consts:[[1,"my-4"],[1,"row","g-4"],["class","col-md-2 ",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"product","h-100"],["class","fa-regular fa-heart heart text-main",3,"click",4,"ngIf"],["class","fa-solid fa-heart heart fa-2x text-danger",3,"click",4,"ngIf"],[1,"p-2","cursor-pointer",3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small"],[1,"h6","text-main"],[1,"d-flex","justify-content-between","align-items-center","small"],[1,""],["class","fas fa-xs fa-star ",3,"rating-color",4,"ngFor","ngForOf"],[1,"text-muted"],[1,"btn","btn-main","w-100","my-2",3,"click"],[1,"fa-regular","fa-heart","heart","text-main",3,"click"],[1,"fa-solid","fa-heart","heart","fa-2x","text-danger",3,"click"],[1,"fas","fa-xs","fa-star"]],template:function(i,c){1&i&&(t.TgZ(0,"section",0)(1,"div",1),t.YNc(2,x,19,13,"div",2),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("ngForOf",c.products))},dependencies:[_.ez,_.sg,_.O5,u.rH]})}return e})()},6286:(p,m,r)=>{r.d(m,{N:()=>d});var _=r(5619),u=r(4769),t=r(9862);let d=(()=>{class a{constructor(o){this._HttpClient=o,this.cartNum=new _.X(0),this.myToken={token:localStorage.getItem("etoken")||""}}addToCart(o){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:o},{headers:this.myToken})}getCartUser(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myToken})}removeCartItem(o){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${o}`,{headers:this.myToken})}updateCartCount(o,n){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${o}`,{count:n},{headers:this.myToken})}clearCart(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.myToken})}checkOut(o,n){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${o}?url=http://localhost:3000`,{shippingAddress:n},{headers:this.myToken})}static#t=this.\u0275fac=function(n){return new(n||a)(u.LFG(t.eN))};static#i=this.\u0275prov=u.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);